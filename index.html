<html>
	<head>
		<script src="okta-auth-sdk-1.0.0.min.js" type="text/javascript"></script>
		<script src="jquery-3.1.1.js" type="text/javascript"></script>
		<style>
			body {
				margin:0;
				padding:0px;
			}
			div.debug {
				font-family: courier;
				font-size: 10px;
			}
			input {
				width:100vw;
				padding:1vh;
			}
			
			button {
				background-color:#007DC1;
			}
		
		</style>
		
		<script>
			function print_r(o) {
				return JSON.stringify(o,null,'\t').replace(/\n/g,'<br>').replace(/\t/g,'&nbsp;&nbsp;&nbsp;'); 
			};
		
			function writeDebug(oObject) {
				var sDebugContent = $('#div_debug').html();
				$('#div_debug').html(print_r(oObject)+'<hr>'+sDebugContent);
			};
		
			function loginUser(sUsername, sPassword, sOrgUrl, sRedirectUrl) {
				if (sOrgUrl != '') {
					localStorage.org = sOrgUrl;
				} else {
					sOrgUrl = localStorage.org;
				}
				
				;
				
				console.log('call function loginUser');
				var authClient = new OktaAuth({url: sOrgUrl});
				authClient.signIn({
				  username: sUsername,
				  password: sPassword
				})
				.then(function(transaction) { // On success
				  switch(transaction.status) {
				    case 'SUCCESS':
				      writeDebug(transaction);
				      console.log(transaction);
				      // authClient.session.setCookieAndRedirect(transaction.sessionToken, 'https://randomcompany.okta-emea.com/app/UserHome'); // Sets a cookie on redirect
				      break;
				
				    default:
				      console.log('Not a succesful login!');
				      throw 'We cannot handle the ' + transaction.status + ' status';
				  }
				})
				.fail(function(err) { // On failure
				  console.log(err);
				  writeDebug(err);
				})
			};
		</script>
		<title>Okta app</title>
	</head>
	<body>
		<input id="inp_orgUrl" type="text" value="https://randomcompany.okta-emea.com" />
		<input id="inp_userName" type="text" value="sylvia.sales" />
		<input id="inp_userPass" type="password" value="" />
		<input id="btn_login" type="button" value="login" />
		<div id="div_debug" class="debug">
		</div>
	</body>
	<script>
		$('#btn_login').click(function() { 
			var sOrgUrl   = $('#inp_orgUrl').val();
			var sUsername = $('#inp_userName').val();
			var sPassword = $('#inp_userPass').val();
			loginUser(sUsername, sPassword, sOrgUrl, ''); 
		});
	</script>
</html>